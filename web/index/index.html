<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <!--    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">-->
<!--    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet" />-->
    <link rel="stylesheet" type="text/tailwindcss" href="./index.css">
</head>
<body class="font-inter bg-gray-50 text-gray-800 h-screen flex flex-col overflow-hidden">

<!-- 分享弹窗 -->
<div id="share-modal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center transition-opacity duration-300">
    <div id="share-container"
         class="bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 share-popup transform transition-all duration-300 scale-95 opacity-0">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-semibold">分享对话</h3>
            <button id="close-share" class="text-gray-500 hover:text-gray-700">
                <i class="fa fa-times"></i>
            </button>
        </div>
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">对话名称</label>
            <input type="text" id="share-title" value="与AI的对话"
                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
        </div>
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">分享链接</label>
            <div class="flex">
                <input type="text" id="share-url" value="https://example.com/chat/12345"
                       class="flex-1 px-4 py-2 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-primary focus:border-primary">
                <button class="bg-primary text-white px-4 py-2 rounded-r-lg btn-hover">
                    <i class="fa fa-copy mr-1"></i>复制
                </button>
            </div>
        </div>
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">分享方式</label>
            <div class="flex space-x-4">
                <button class="w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center btn-hover">
                    <i class="fa fa-weixin"></i>
                </button>
                <button class="w-12 h-12 rounded-full bg-red-500 text-white flex items-center justify-center btn-hover">
                    <i class="fa fa-weibo"></i>
                </button>
                <button class="w-12 h-12 rounded-full bg-indigo-500 text-white flex items-center justify-center btn-hover">
                    <i class="fa fa-qq"></i>
                </button>
                <button class="w-12 h-12 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center btn-hover">
                    <i class="fa fa-envelope"></i>
                </button>
            </div>
        </div>
        <div class="flex justify-end">
            <button id="cancel-share" class="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg mr-2 btn-hover">取消
            </button>
            <button class="px-4 py-2 bg-primary text-white rounded-lg btn-hover">确认分享</button>
        </div>
    </div>
</div>

<!-- 创建会话弹窗 -->
<div id="create-chat-modal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center transition-opacity duration-300">
    <div class="bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0"
         id="create-chat-container">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-semibold">创建新会话</h3>
            <button id="close-create-chat" class="text-gray-500 hover:text-gray-700 transition-colors">
                <i class="fa fa-times text-xl"></i>
            </button>
        </div>

        <!-- 会话类型选项卡 -->
        <div class="border-b border-gray-200 mb-6">
            <div class="flex space-x-8">
                <button id="single-ai-tab"
                        class="create-tab py-2 px-1 border-b-2 border-primary text-primary font-medium">
                    单AI会话
                </button>
                <button id="group-chat-tab"
                        class="create-tab py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 transition-colors">
                    群聊会话
                </button>
            </div>
        </div>

        <!-- 单AI会话表单（包含在form中） -->
        <div id="single-ai-form" class="create-form">
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">AI名称</label>
                <input type="text" id="ai-name" placeholder="输入AI名称" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">AI URL</label>
                <input type="url" id="ai-url" placeholder="https://example.com/api" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Model ID</label>
                <input type="url" id="model-id" placeholder="example-model-id" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                <div class="flex">
                    <input type="password" id="api-key" placeholder="sk-xxxxxxx" required
                           class="flex-1 px-4 py-2 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
                    <button class="bg-gray-100 text-gray-700 px-3 py-2 rounded-r-lg hover:bg-gray-200 transition-colors"
                            id="show-api-key">
                        <i class="fa fa-eye-slash"></i>
                    </button>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">系统设置</label>
                <textarea id="sys-set" rows="3" placeholder="输入对AI的系统提示... (例如：你是一个专业的知识问答助手)"
                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200"></textarea>
                <p class="text-xs text-gray-500 mt-1">提示：系统设置将影响AI的回答风格和能力</p>
            </div>
        </div>


        <!-- 群聊会话表单（包含在form中） -->
        <form id="group-chat-form" class="create-form hidden">
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">群聊名称</label>
                <input type="text" id="group-name" placeholder="输入群聊名称" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">选择AI助手</label>
                <div class="space-y-2 max-h-60 overflow-y-auto pr-2">
                    <div class="ai-option flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors">
                        <input type="checkbox" id="ai-1" name="selected-ais"
                               class="h-4 w-4 text-primary focus:ring-primary/50 border-gray-300 rounded" required>
                        <label for="ai-1" class="ml-3 text-sm font-medium">智能问答助手</label>
                        <span class="ml-auto text-xs text-gray-500">已连接</span>
                    </div>

                    <div class="ai-option flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors">
                        <input type="checkbox" id="ai-2" name="selected-ais"
                               class="h-4 w-4 text-primary focus:ring-primary/50 border-gray-300 rounded" required>
                        <label for="ai-2" class="ml-3 text-sm font-medium">代码生成助手</label>
                        <span class="ml-auto text-xs text-gray-500">已连接</span>
                    </div>

                    <div class="ai-option flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors">
                        <input type="checkbox" id="ai-3" name="selected-ais"
                               class="h-4 w-4 text-primary focus:ring-primary/50 border-gray-300 rounded" required>
                        <label for="ai-3" class="ml-3 text-sm font-medium">创意写作助手</label>
                        <span class="ml-auto text-xs text-gray-500">已连接</span>
                    </div>

                    <div class="ai-option flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors">
                        <input type="checkbox" id="ai-4" name="selected-ais"
                               class="h-4 w-4 text-primary focus:ring-primary/50 border-gray-300 rounded" required>
                        <label for="ai-4" class="ml-3 text-sm font-medium">数据分析助手</label>
                        <span class="ml-auto text-xs text-gray-500">已连接</span>
                    </div>
                </div>
                <p class="text-xs text-gray-500 mt-1">提示：至少选择两个AI加入群聊</p>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">群聊系统设置</label>
                <textarea id="group-sys-set" rows="3"
                          placeholder="输入群聊的系统提示... (例如：这是一个技术讨论群，保持专业但友好的氛围)"
                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200"></textarea>
                <p class="text-xs text-gray-500 mt-1">提示：群聊设置将影响所有AI助手的互动方式</p>
            </div>
        </form>

        <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200">
            <button id="cancel-create-chat"
                    class="px-5 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                取消
            </button>
            <button id="confirm-create-chat"
                    class="px-5 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors shadow-md hover:shadow-lg">
                确认创建
            </button>
        </div>
    </div>
</div>

<!-- 编辑会话弹窗 -->
<div id="edit-ai-modal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center transition-opacity duration-300">
    <div id="edit-ai-container" class="bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-semibold">编辑AI会话</h3>
            <button id="close-edit-ai" class="text-gray-500 hover:text-gray-700">
                <i class="fa fa-times"></i>
            </button>
        </div>

        <div class="space-y-6">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">AI名称</label>
                <input type="text" id="edit-ai-name" value="智能助手"
                       class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">API URL</label>
                <input type="text" id="edit-api-url" value="https://api.example.com/v1/chat"
                       class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Model ID</label>
                <input type="text" id="edit-model-id" value="gpt-4-1106-preview"
                       class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                <div class="flex">
                    <input type="text" id="edit-api-key" value="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
                           class="flex-1 px-4 py-2.5 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all">
                    <button id="copy-api-key" class="bg-gray-100 text-gray-700 px-4 py-2.5 rounded-r-lg hover:bg-gray-200 transition-colors">
                        <i class="fa fa-copy mr-1"></i>复制
                    </button>
                </div>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">System Set</label>
                <textarea id="edit-sys-set" rows="4" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"></textarea>
            </div>
        </div>

        <div class="flex justify-end mt-6 space-x-3">
            <button id="cancel-edit-ai" class="px-5 py-2.5 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">取消</button>
            <button id="confirm-edit-ai" class="px-5 py-2.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors shadow-md hover:shadow-lg">保存修改</button>
        </div>
    </div>
</div>

<!-- 登录注册弹窗 -->
<div id="auth-popup" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center transition-opacity duration-300">
    <div class="bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0" id="auth-container">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-semibold">账户登录</h3>
            <button id="close-auth" class="text-gray-500 hover:text-gray-700 transition-colors">
                <i class="fa fa-times"></i>
            </button>
        </div>

        <!-- 选项卡切换 -->
        <div class="border-b border-gray-200 mb-6">
            <div class="flex space-x-8">
                <button id="login-tab" class="auth-tab py-2 px-1 border-b-2 border-primary text-primary font-medium">
                    登录
                </button>
                <button id="register-tab" class="auth-tab py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 transition-colors">
                    注册
                </button>
            </div>
        </div>

        <!-- 登录表单 -->
        <div id="login-form" class="auth-form">
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">用户名</label>
                <div class="flex items-center">
                    <i class="fa fa-user text-gray-400 w-5"></i>
                    <input type="text" id="login-username" placeholder="请输入用户名" required
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
                </div>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">密码</label>
                <div class="flex items-center">
                    <i class="fa fa-lock text-gray-400 w-5"></i>
                    <input type="password" id="login-password" placeholder="请输入密码" required
                           class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
                    <button class="text-gray-400 hover:text-gray-600 p-1 transition-colors" id="toggle-login">
                        <i class="fa fa-eye-slash"></i>
                    </button>
                </div>
            </div>

            <div class="mb-6 flex justify-end">
                <button type="button" class="text-sm text-primary hover:underline">忘记密码？</button>
            </div>

            <button type="button" id="login-btn" class="w-full py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-colors shadow-md hover:shadow-lg flex items-center justify-center">
                <i class="fa fa-sign-in mr-2"></i> 登录
            </button>
        </div>

        <!-- 注册表单 -->
        <div id="register-form" class="auth-form hidden">
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">用户名</label>
                <div class="flex items-center">
                    <i class="fa fa-user text-gray-400 w-5"></i>
                    <input type="text" id="register-username" placeholder="请设置用户名" required minlength="3"
                           class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
                </div>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">密码</label>
                <div class="flex items-center">
                    <i class="fa fa-lock text-gray-400 w-5"></i>
                    <input type="password" id="register-password" placeholder="请设置密码" required minlength="6"
                           class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
                    <button class="text-gray-400 hover:text-gray-600 p-1 transition-colors" id="toggle-register">
                        <i class="fa fa-eye-slash"></i>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-1">至少6位字符</p>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">验证邮箱</label>
                <div class="flex items-center">
                    <i class="fa fa-envelope text-gray-400 w-5"></i>
                    <input type="email" id="register-email" placeholder="请输入邮箱" required
                           class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
                </div>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">验证码</label>
                <div class="flex items-center">
                    <i class="fa fa-key text-gray-400 w-5"></i>
                    <input type="text" id="register-code" placeholder="请输入验证码" required maxlength="6"
                           class="flex-1 px-4 py-2 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200">
                    <button type="button" id="get-code" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-r-lg hover:bg-gray-200 transition-colors whitespace-nowrap">
                        获取验证码
                    </button>
                </div>
            </div>

            <div class="mb-6 flex items-center">
                <input type="checkbox" id="agree-terms" class="h-4 w-4 text-primary focus:ring-primary/50 border-gray-300 rounded" required>
                <label for="agree-terms" class="ml-2 text-sm text-gray-700">我已阅读并同意 <a href="#" class="text-primary hover:underline">用户协议</a> 和 <a href="#" class="text-primary hover:underline">隐私政策</a></label>
            </div>

            <button type="button" id="register-btn" class="w-full py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-colors shadow-md hover:shadow-lg flex items-center justify-center">
                <i class="fa fa-user-plus mr-2"></i> 注册
            </button>
        </div>

        <div class="text-center text-sm text-gray-500 mt-6">
            <p id="switch-to-login" class="hidden cursor-pointer hover:text-primary transition-colors">已有账号？<span class="ml-1">立即登录</span></p>
            <p id="switch-to-register" class="cursor-pointer hover:text-primary transition-colors mt-1">还未注册？<span class="ml-1">立即注册</span></p>
        </div>
    </div>
</div>

<div class="flex h-full">
    <!-- 左侧边栏 -->
    <div>
        <div class="p-4 border-b border-gray-200 flex justify-between items-center">
            <h2 class="font-semibold text-lg">AI Chat</h2>
            <button id="toggle-sidebar" class="p-2 rounded-full hover:bg-gray-100 btn-hover">
                <i class="fa fa-times"></i>
            </button>
        </div>
        <div id="sidebar"
             class="w-64 bg-white border-r border-gray-200 h-full flex flex-col sidebar-slide transform-transition duration-300">
            <!-- 新建聊天和AI选择 -->
            <div class="p-4">
                <button id="new-chat-btn"
                        class="w-full py-2 px-4 bg-primary text-white rounded-lg mb-4 flex items-center justify-center btn-hover">
                    <i class="fa fa-plus mr-2"></i>新建聊天
                </button>

                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-500 mb-2">AI 助手</h3>
                    <div class="space-y-2" id="single-ai-area"></div>
                </div>

                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-2">群聊</h3>
                    <div class="space-y-2" id="ai-group-area"></div>
                </div>
            </div>

            <!-- 聊天历史记录 -->
            <div class="flex-1 overflow-y-auto scrollbar-hide p-2">
                <h3 class="text-sm font-medium text-gray-500 mb-2 px-2">最近聊天</h3>
<!--                <div class="space-y-1" id="recent-history-area">-->
<!--                    <div class="p-2 rounded-lg bg-primary/5 cursor-pointer">-->
<!--                        <div class="flex items-center">-->
<!--                            <img src="https://picsum.photos/200/200?random=1" alt="AI助手1"-->
<!--                                 class="w-8 h-8 rounded-full mr-3">-->
<!--                            <div>-->
<!--                                <div class="flex justify-between">-->
<!--                                    <h4 class="font-medium">智能助手</h4>-->
<!--                                    <span class="text-xs text-gray-500">10:23</span>-->
<!--                                </div>-->
<!--                                <p class="text-xs text-gray-600 truncate w-40">-->
<!--                                    你好！我是智能助手，有什么可以帮助你的吗？</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="p-2 rounded-lg hover:bg-gray-100 cursor-pointer">-->
<!--                        <div class="flex items-center">-->
<!--                            <div class="flex -space-x-2">-->
<!--                                <img src="https://picsum.photos/200/200?random=1" alt="AI助手1"-->
<!--                                     class="w-8 h-8 rounded-full border-2 border-white">-->
<!--                                <img src="https://picsum.photos/200/200?random=2" alt="AI助手2"-->
<!--                                     class="w-8 h-8 rounded-full border-2 border-white">-->
<!--                            </div>-->
<!--                            <div class="ml-3">-->
<!--                                <div class="flex justify-between">-->
<!--                                    <h4 class="font-medium">开发团队</h4>-->
<!--                                    <span class="text-xs text-gray-500">昨天</span>-->
<!--                                </div>-->
<!--                                <p class="text-xs text-gray-600 truncate w-40">代码已经完成了初步优化</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="p-2 rounded-lg hover:bg-gray-100 cursor-pointer">-->
<!--                        <div class="flex items-center">-->
<!--                            <img src="https://picsum.photos/200/200?random=3" alt="AI助手3"-->
<!--                                 class="w-8 h-8 rounded-full mr-3">-->
<!--                            <div>-->
<!--                                <div class="flex justify-between">-->
<!--                                    <h4 class="font-medium">创作助手</h4>-->
<!--                                    <span class="text-xs text-gray-500">周一</span>-->
<!--                                </div>-->
<!--                                <p class="text-xs text-gray-600 truncate w-40">这是为你生成的诗歌：《晨光》</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
            </div>
        </div>
    </div>

    <!-- 主内容区 -->
    <div id="main-content" class="flex-1 flex flex-col bg-gray-50 transition-all duration-300">
        <!-- 聊天头部 -->
        <div class="bg-white border-b border-gray-200 p-4 flex justify-between items-center">
            <div class="flex items-center">
                <div class="flex -space-x-2 mr-3">
                    <img src="https://picsum.photos/200/200?random=1" alt="AI助手1"
                         class="w-8 h-8 rounded-full border-2 border-white">
                    <img src="https://picsum.photos/200/200?random=2" alt="AI助手2"
                         class="w-8 h-8 rounded-full border-2 border-white">
                </div>
                <div class="relative">
                    <h1 id="chat-title" class="font-semibold text-lg cursor-pointer hover:text-primary"></h1>
                    <input type="text" id="edit-title"
                           class="absolute -top-1 -left-1 w-40 py-1 px-2 border border-primary rounded-md hidden"
                           value="">
                </div>
                <div id="typing-indicator" class="text-xs text-gray-500 hidden">
                    <span class="animate-pulse"> &nbsp;&nbsp;正在输入...</span>
                </div>
            </div>
            <div class="flex items-center space-x-1"> <!-- 调整右侧布局为间距1 -->
                <button id="share-btn" class="p-2 rounded-full hover:bg-gray-100 text-gray-600 btn-hover relative">
                    <i class="fa fa-share-alt"></i>
                </button>

                <!-- 登录注册按钮 -->
                <div class="relative">
                    <button id="auth-btn" class="p-2 rounded-full hover:bg-gray-100 text-gray-600 btn-hover relative overflow-hidden group">
                        <!-- 正常状态图标 -->
                        <i class="fa fa-user-o transition-transform duration-300 group-hover:scale-110"></i>

                        <!-- 加载状态图标 (默认隐藏) -->
                        <i id="auth-loading" class="fa fa-spinner fa-spin absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-300 text-gray-600"></i>

                        <!-- 提示文本 (悬停显示) -->
                        <span class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">
                    登录/注册
                </span>
                    </button>

                    <!-- 登录注册下拉菜单 (默认隐藏) -->
                    <div id="auth-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 z-10 opacity-0 invisible transition-all duration-200 transform translate-y-2">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-primary transition-colors">
                            <i class="fa fa-sign-in mr-2"></i> 登录
                        </a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-primary transition-colors">
                            <i class="fa fa-user-plus mr-2"></i> 注册
                        </a>
                        <div class="border-t border-gray-100 my-1"></div>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-primary transition-colors">
                            <i class="fa fa-question-circle mr-2"></i> 帮助中心
                        </a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-primary transition-colors">
                            <i class="fa fa-sign-out mr-2"></i> 退出登录
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 聊天内容区域 -->
        <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide"></div>

        <!-- 输入区域 -->
        <div class="bg-white border-t border-gray-200 p-4">
            <div class="flex space-x-2">
                <button class="p-2 text-gray-500 hover:bg-gray-100 rounded-full btn-hover">
                    <i class="fa fa-paperclip"></i>
                </button>
                <div class="flex-1 relative">
                    <textarea id="message-input" rows="1" placeholder="输入消息..."
                              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary resize-none transition-all duration-200"
                              style="height: 45px;"
                    ></textarea>
                </div>
                <button id="send-btn"
                        class="bg-primary text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed btn-hover">
                    <i class="fa fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!--<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
<script src="./config.js"></script>
<script src="./utils.js"></script>
<script src="./index.js"></script>
<script src="./login_register.js"></script>
<script src="./chat.js"></script>
</body>
</html>